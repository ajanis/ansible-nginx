---
- name: include os specific vars
  include_vars: "{{ item }}"
  with_first_found:
    - "{{ ansible_distribution }}{{ ansible_distribution_major_version }}.yml"
    - "{{ ansible_os_family }}.yml"

- include_tasks: installation.yml
- include_tasks: configuration.yml

- include_tasks: install_fail2ban.yml
  when: fail2ban_enable

- include_tasks: configure_fail2ban.yml
  when: fail2ban_enable
